---
const { sponsors } = Astro.props as {
  sponsors: Array<{
    id: string
    name: string
    type: string
    description: string
    longDescription: string
    url: string
    img: { src: string }
  }>
}
---

<div
  class="grid grid-cols-2 gap-4 sm:grid-cols-3 sm:gap-5 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6"
>
  {
    sponsors.map((s) => (
      <button
        onclick={`window.openSponsorModal('${s.id}', 'community')`}
        class="group relative flex aspect-square flex-col items-center justify-center overflow-hidden rounded-2xl border-2 border-gray-200 bg-white p-4 transition-all duration-300 hover:scale-105 hover:border-indigo-400 hover:shadow-lg hover:shadow-indigo-500/20 dark:border-neutral-700 dark:bg-neutral-900 dark:hover:border-indigo-500 dark:hover:shadow-indigo-500/30"
      >
        {/* Decorative Glow Overlay */}
        <div class="pointer-events-none absolute bottom-0 right-0 -mb-12 -mr-12 h-32 w-32 rounded-full bg-gradient-to-br from-indigo-100 to-purple-100 opacity-0 blur-2xl transition-opacity duration-500 group-hover:opacity-60 dark:from-indigo-900/30 dark:to-purple-900/30 dark:group-hover:opacity-80" />

        {/* Logo Container */}
        <div class="relative z-10 flex w-full flex-1 items-center justify-center overflow-hidden p-2">
          <img
            src={s.img.src}
            alt={s.name}
            class="max-h-full max-w-full object-contain transition-all duration-300 group-hover:scale-105 group-hover:drop-shadow-md"
          />
        </div>

        {/* Name */}
        <p class="relative z-10 line-clamp-2 w-full text-center text-xs font-semibold leading-tight text-gray-700 transition-colors duration-300 group-hover:text-indigo-600 dark:text-gray-400 dark:group-hover:text-indigo-400">
          {s.name}
        </p>

        {/* Hover Indicator */}
        <div class="absolute bottom-2 left-1/2 z-10 flex -translate-x-1/2 items-center gap-1 opacity-0 transition-all duration-300 group-hover:opacity-100">
          <span class="text-[10px] font-medium text-indigo-600 dark:text-indigo-400">
            View
          </span>
          <svg
            class="h-3 w-3 text-indigo-600 dark:text-indigo-400"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2.5"
              d="M9 5l7 7-7 7"
            />
          </svg>
        </div>

        {/* Hidden data for modal */}
        <div
          id={`data-${s.id}`}
          class="hidden"
          data-tier="community"
          data-name={s.name}
          data-desc={s.description}
          data-long-desc={s.longDescription}
          data-img={s.img.src}
          data-url={s.url}
          data-type={s.type}
        />
      </button>
    ))
  }
</div>

<style>
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
